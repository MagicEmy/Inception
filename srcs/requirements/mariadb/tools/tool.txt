    Tools:

****** init.sql ******

this file contains the queries that would be run in order to create the database, user that would be used by wordpress.

-- will create the databases that will contain all the tables needed by wordpress
create database if not exists :DB_NAME;
-- this would be the user that wordpress will use to connect to the database
-- note that in order to connect from outside the container we will pass % wildcard 
create user if not exists ':USER'@'%' identified by ':UPASS';
-- The user will not have access to do CRUD operations on the database thus we need  to give privileges to that user.
grant all privileges on :DB_NAME.* to ':USER'@'%' identified by ':UPASS';
flush privileges;
create user if not exists ':ADMIN'@'%' identified by ':APASS';
grant all privileges on *.* to ':ADMIN'@'%';
flush privileges;

    ***** createdb.sh ******

#!/bin/bash

# infile modification of the queries file to replace the placeholders with the expanded values
sed -i "s/\:DB_NAME/${DB_NAME}/g" /mariadb-conf.d/init.sql
sed -i "s/\:USER/${DB_USER}/g" /mariadb-conf.d/init.sql
sed -i "s/\:UPASS/${USER_PASSWORD}/g" /mariadb-conf.d/init.sql
sed -i "s/\:ADMIN/${ADMIN}/g" /mariadb-conf.d/init.sql
sed -i "s/\:APASS/${ADMIN_PASSWORD}/g" /mariadb-conf.d/init.sql

# create directories that will be used by mariadb to store runtime files like the file containing the pid of the running instance
if [ ! -d /var/run/mysqld ]; then
 mkdir /var/run/mysqld
fi
if [ ! -d /run/mysqld ]; then
 mkdir /run/mysqld
fi

if [ ! -d /var/lib/mysql/mysql ]; then
 mysql_install_db --user=root
fi
# NOTE: will have to run the daemon in the foreground to keep the container up
# thus we have to: start the mariadb service in the background, execute the queries, kill the background service then start mariadb in the foreground
service mariadb start
# Loop for checking if the mariadb server is up or not
while ! mysqladmin ping -hlocalhost --silent 2>/dev/null; do
 sleep 1
done
mysql -u root < /mariadb-conf.d/init.sql
service mariadb stop
while  mysqladmin ping -hlocalhost --silent 2>/dev/null; do
 sleep 1
done
# run the service in the foreground
exec mysqld -u root